from util.Vector2 import Vector2

Image = list[list[str]]

image1 = """...#......
.......#..
#.........
..........
......#...
.#........
.........#
..........
.......#..
#...#....."""

image2 = """.......................................................................................#....................................................
............................#................#..............................................................................................
....#...............................#.............................................................#........#.......#........................
................#.....#...........................#..........#...............................#................................#............#
..........................................#.................................................................................................
..........#............................................#......................#........................................#..............#.....
............................................................................................................................................
..............................#.......................................#............#...............#......#.......#.........................
.................................................................#.........................#................................................
....................#..............#.....#..................................................................................................
..............#............#................................................................................................#.....#......#..
............................................................#...........................#...................................................
..#.........................................#......#......................#.................................................................
...............................................................................................#......................................#.....
............#............................................#.......................................................#..........................
.................#.....................................................................................#....................................
...............................#..................................................#.........#......................................#........
...............................................................#.................................#..........................................
..............#...................................#.......................#................................#........#.......................
.......................................................................................#....................................#..............#
.#........................#...................#................................................................#............................
....................................#......................................................#.........................................#......
...........#......................................................................#................#........................................
....................................................#....................#....................................................#.............
.....................#............................................#......................................#.........#........................
................#...........................................................................................................................
#.........................................#......................................................#................................#.........
............#.......................#........................................#........................#.....................................
......#..................................................................................#................................#.................
...........................................................................................................#........#.......................
.......................................................#.....................................#..............................................
.........#........................#............#...........................#.........#..............................................#.......
.....................................................................................................#......................................
....................#................................................#.........................................................#............
.........................................#.............................................................................#................#...
...........................#....................................#...........................................................................
.......#.......................................................................#.................#........#.......#.........................
......................................................................................#.....................................................
#......................................#..............................#..............................#......................................
.............#......#...........#...........................................................................................................
.....................................................#....................................#...................#..................#..........
..........................#......................................#........................................................#.................
..............................................................................#.............................................................
...................................#............................................................#........#..................................
....#..........#..........................................#..........#....................................................................#.
.................................................................................................................#..........................
...........................#.........................................................#......................................................
.........................................#...................#..............................................................................
........#............................................#........................................#...........#................#................
.............................................#.....................................................#.................#...............#......
............#.................#......#.............................#..........#................................................#............
...........................................................................................................................................#
.........................#.........................#........................................................................................
............................................................#...............................................................................
.........#................................#........................................#.............#.....................................#....
.................#..........#............................................................#......................#...........................
..........................................................................................................#...........#.....................
..........................................................................#..................#............................................#.
......#.........................................................#...........................................................................
....................................................................................................#.....................#.................
...........#......................................#.................#.........#.............................#..................#............
............................#...............................................................................................................
....................#..................................................................#.............................#......................
..........................................#.......................................#.............................#........................#..
#.......#.....#................#.........................#................#..............................#..................................
............................................................................................................................................
.....................................#........................#......................#........#.............................................
.....#......................................#................................#..............................................#.......#.......
............................................................................................................................................
.................#......#........................................#..............................................#......#................#...
................................#.........................................#.................................................................
..........#..........................................................#...........#...............#..........................................
.......................................#.................#................................#..................#..............................
............................................................................................................................................
............................................................................................................................................
.#..................................#............................................................................................#..........
.............#.......#.......................................................#..............................................................
...................................................#.................................#.............#.......#...........................#....
............................................................................................................................................
......#....................#......#............................#....................................................#......#................
...............#..............................#......................#.............................................................#........
........................................#...................................................................................................
.........#..............................................................................................................................#...
.........................#......................................................#.........#..........#......................................
.............................................................#..............................................................#...............
....................................................#....................#..................................................................
#.............#.......................#................................................................................#........#...........
.....#...........................................................#......................................#.....#.............................
..........#.........#........#............................#......................................#..................................#.......
......................................................................................#......................................#..............
...............................................#.....#......................................................................................
................#.........................#....................#.......#.....#...........................................................#..
........................#........................................................................................................#..........
.#...................................#..........................................................#..........#................................
.....................................................................................................................#......................
...........................#..............................................................#.................................................
......#...............#.................................................................................................................#...
....................................................#.....#.............#.....................#.............................................
.......................................#........................................#..................#.............................#..........
............................................................................................................................................
..................#...............#...........#......................................................................................#......
.....................................................................#...............#.....................#..........#.......#.............
..................................................#..............................................#..........................................
..........................#...........#.....................................................................................................
...........................................................................................................................................#
.........................................................#...............#......................................#...........................
........#...........#...........................................#............................................................#..............
..............#.......................................................................#...........................................#.........
....................................................#.......................................................#...............................
................................#..............#........................................................................#...................
.........................................#.......................................................#..........................................
..........................................................#......#...........#...........#............#..............................#......
..........................#........#..............................................................................#...........#.............
...................................................#.......................................................#................................
.........#..............................................................................................................................#...
....................#........#..............................#...............................................................................
......................................................................#.........................#...........................................
......................................................#.......................#..........#...............#..............#...................
...#......................................#.................................................................................................
................#.................................#.........................................................................................
......................#.............#...........................................................................#..........#.........#......
.......#....................................................#............#..................................................................
...................................................................................#........................................................
............................................................................................#......................#........................
...........#...................#.........................#..........................................#......#................................
................#...................................#...........................#.....#.......................................#...........#.
.....................#..................................................#............................................................#......
...............................................................................................#............................................
.#.........................................#.......................#........................................................................
...................................#.........................#..............................................................................
.............................#..............................................................................................................
.................#....................................#....................................#...................#......#.....................
..........................................................................................................................................#.
........#......................................#..................#..........................................................#..............
..............#....................................................................#........................................................
.....................#......................................................................................................................
......................................#...................................................#.................................................
..#...............................................................................................................#.........................
..........................#...................#......#....................#...................#.............................#.....#......#..
......#.........#.................#..............................#..................#...............#........#.............................."""


def read_input(input: str) -> Image:
    return [list(line) for line in input.splitlines()]

def find_galaxies(image: Image):
    galaxies = []
    for y, row in enumerate(image):
        for x, cell in enumerate(row):
            if cell == "#":
                galaxies.append(Vector2(x,y))
    return galaxies

def main(image):
    expand_factor = 1000000
    galaxies = find_galaxies(image)
    empty_rows = [y for y in range(len(image)) if y not in [galaxy.y for galaxy in galaxies]]
    empty_columns  = [x for x in range(len(image[0])) if x not in [galaxy.x for galaxy in galaxies]]

    sum_len = 0
    for i, galaxy_source in enumerate(galaxies):
        for galaxy_destination in galaxies[i+1:]:
            distance = 0
            for y in range(galaxy_source.y , galaxy_destination.y , 1 if galaxy_source.y < galaxy_destination.y else -1):
                distance += expand_factor if y in empty_rows else 1
            for x in range(galaxy_source.x , galaxy_destination.x , 1 if galaxy_source.x < galaxy_destination.x else -1):
                distance += expand_factor if x in empty_columns else 1
            sum_len += distance
            
    
    print(sum_len)

main(read_input(image2))
